# 自己進化型マルチエージェントシステム

## 概要

これはAIが対話を通じて自らを進化させる自己進化型マルチエージェントシステムです。ユーザーはOrchestratorエージェントと対話するだけで、システムの機能追加や改善をリアルタイムで実行できます。

## システム構成

### 🤖 Orchestratorエージェント
- ユーザーとの対話を管理
- 進化要求を検出・分析
- 要件の明確化と確認
- Coderエージェントへのタスク委任

### 👨‍💻 Coderエージェント
- evolution_task.jsonを監視
- コード編集とバックアップ作成
- 構文検証とエラーチェック
- 安全な変更適用

### 🔍 Verification System
- コード構文チェック
- インポート妥当性検証
- 品質メトリクス評価
- レポート生成

## 起動方法

### Windowsの場合
```bash
start_self_evolving.bat
```

### Linux/Macの場合
```bash
chmod +x start_self_evolving.sh
./start_self_evolving.sh
```

### 直接起動の場合
```bash
streamlit run self_evolving_gui.py --server.port=8502 --server.runOnSave=true
```

## 使用方法

### 1. アクセス
ブラウザで `http://localhost:8502` にアクセスします。

### 2. 進化の開始
以下のようなキーワードを含めて話しかけると進化が開始されます：

- 「機能を追加して」
- 「変更して」
- 「改善して」
- 「新しい人格を作って」
- 「AIに指示して」
- 「自分で書き換え」

### 3. 確認プロセス
要件が曖昧な場合、Orchestratorが確認質問をします：
- 「その機能を実装する場合、XXという挙動でよろしいですか？」
- 「現在のUIレイアウトを変更する必要がありますが、進めてもいいですか？」

### 4. 進化実行
確認後、Coderエージェントがバックエンドで以下を実行します：
1. 現在のファイルをbackups/に保存
2. コードを編集
3. 構文エラーを検証
4. 変更を適用

## ファイル構成

```
ai_agent_gui/
├── orchestrator_agent.py      # Orchestratorエージェント
├── coder_agent.py            # Coderエージェント
├── verification_system.py    # 検証システム
├── self_evolving_gui.py      # メインGUI
├── evolution_task.json       # 進化タスクファイル
├── backups/                  # バックアップディレクトリ
├── logs/                     # ログディレクトリ
├── data/                     # データディレクトリ
├── start_self_evolving.bat   # Windows起動スクリプト
└── start_self_evolving.sh    # Linux/Mac起動スクリプト
```

## 安全性機能

### 🔒 バックアップシステム
- すべての編集前に自動バックアップ
- タイムスタンプ付きバックアップ管理
- エラー時の自動ロールバック

### 🛡️ 検証プロトコル
- Python構文チェック
- インポート妥当性検証
- コード品質評価
- エラー報告と修復提案

### 🚨 エラーハンドリング
- 構文エラー時の自動ロールバック
- 詳細なエラーレポート
- 安全な変更適用プロセス

## 進化例

### 新規機能追加
```
ユーザー: 「音声認識機能を追加して」
Orchestrator: 「音声認識機能を実装します。現在のUIに追加してよろしいですか？」
ユーザー: 「はい」
Coder: [バックエンドで機能追加を実行]
```

### 新規人格作成
```
ユーザー: 「『丁寧な先生』という人格を作って」
Orchestrator: 「丁寧な先生の人格を作成します。特徴を教えてください」
ユーザー: 「丁寧で分かりやすい説明をする人格」
Coder: [バックエンドで人格定義を追加]
```

## 技術仕様

### ホットリロード
- `--server.runOnSave=true` で有効化
- コード変更時の自動リロード
- 即座の機能反映

### マルチスレッド処理
- Coderエージェントは別スレッドで実行
- UIの応答性を維持
- 非同期進化処理

### JSONベースの通信
- evolution_task.jsonでのタスク受け渡し
- 構造化されたデータ交換
- 拡張容易な設計

## 注意事項

1. **重要なファイル**: システムコアファイルの編集は慎重に行ってください
2. **バックアップ**: 進化前に必ずバックアップが作成されます
3. **検証**: すべての変更は構文検証をパスする必要があります
4. **リソース**: 大規模な進化には十分なディスク容量が必要です

## 拡張機能

将来的には以下の機能を追加予定：

- 🧠 高度なNLPによる要件解析
- 🔄 バージョン管理システム
- 📊 進化履歴の可視化
- 🌐 マルチモーダル入力対応
- 🤝 協調進化機能

## トラブルシューティング

### 進化が失敗する場合
1. logs/ディレクトリのログを確認
2. evolution_task.jsonの内容を確認
3. 構文エラーがないか検証

### UIが応答しない場合
1. Coderエージェントの処理が完了するまで待機
2. ブラウザをリロード
3. ターミナルで再起動

### バックアップから復元する場合
```bash
# 最新のバックアップを確認
ls -la backups/

# 手動で復元
cp backups/YYYYMMDD_HHMMSS/filename.py ./filename.py
```

---

このシステムにより、AIが対話を通じてリアルタイムに進化していく体験を実現します。🚀
